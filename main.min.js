function ordenarBicycle(){baraja="AC,2C,3C,4C,5C,6C,7C,8C,9C,10C,JC,QC,KC,AT,2T,3T,4T,5T,6T,7T,8T,9T,10T,JT,QT,KT,KD,QD,JD,10D,9D,8D,7D,6D,5D,4D,3D,2D,AD,KP,QP,JP,10P,9P,8P,7P,6P,5P,4P,3P,2P,AP",baraja=baraja.split(","),abreBaraja()}function ordenarSoloAces(){baraja="AT,AC,AP,AD,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X",baraja=baraja.split(","),abreBaraja()}function ordenarRosarioEightKings(){baraja="8P,KC,3T,10D,2P,7C,9T,5D,QP,4C,AT,6D,JP,8C,KT,3D,10P,2C,7T,9D,5P,QC,4T,AD,6P,JC,8T,KD,3P,10C,2T,7D,9P,5C,QT,4D,AP,6C,JT,8D,KP,3C,10T,2D,7P,9C,5T,QD,4P,AC,6T,JD",baraja=baraja.split(","),consola('"Eight Kings threatened to save ninety-five ladies for one sick knave"'),abreBaraja()}function ordenar4Kings(){baraja="AT,2T,3T,4T,5T,6T,7T,8T,9T,10T,JT,QT,KT,AC,2C,3C,4C,5C,6C,7C,8C,9C,10C,JC,QC,KC,AP,2P,3P,4P,5P,6P,7P,8P,9P,10P,JP,QP,KP,AD,2D,3D,4D,5D,6D,7D,8D,9D,10D,JD,QD,KD",baraja=baraja.split(","),abreBaraja()}function ordenarRosarioDixRois(){baraja="10P,8C,KT,9D,JP,AC,7T,QD,10C,8T,KD,9P,JC,AT,7D,QP,10T,8D,KP,9C,JT,AD,7P,QC,10D,8P,KC,9T,JD,AP,7C,QT",baraja=baraja.split(","),consola('"Dix huit Rois ne valent pas sept Dames"'),abreBaraja()}function ordenarRosarioUnusQuinque(){baraja="AP,5C,9T,JD,6P,4C,2T,KD,7P,8C,QT,3D,10P,AC,5T,9D,JP,6C,4T,2D,KP,7C,8T,QD,3P,10C,AT,5D,9P,JC,6T,4D,2P,KC,7T,8D,QP,3C,10T,AD,5P,9C,JT,6D,4P,2C,KT,7D,8P,QC,3T,10D",baraja=baraja.split(","),consola('"Unus quinque noven fámulus sex quatuor duo Rex septem acto faemina trina decem"'),abreBaraja()}function ordenarRosario18Reyes(){baraja="10P,8C,KT,7D,2P,3C,AT,4D,9P,QC,6T,JD,5P,10C,8T,KD,7P,2C,3T,AD,4P,9C,QT,6D,JP,5C,10T,8D,KP,7C,2T,3D,AP,4C,9T,QD,6P,JC,5T,10D,8P,KC,7T,2D,3P,AC,4T,9D,QP,6C,JT,5D",baraja=baraja.split(","),consola('"18 Reyes sentados entre las 49 damas se van al cine"'),abreBaraja()}function ordenarMnemonica(){baraja="4T,2C,7D,3T,4C,6D,AP,5C,9P,2P,QC,3D,QT,8C,6P,5P,9C,KT,2D,JC,3P,8P,6C,10T,5D,KD,2T,3C,8D,5T,KP,JD,8T,10P,KC,JT,7P,10C,AD,4P,7C,4D,AT,9T,JP,QD,7T,QP,10D,6T,AC,9D",baraja=baraja.split(","),abreBaraja()}function ordenarPersonal(){baraja=$("#ordenPersonal").val(),baraja=baraja.split(","),abreBaraja()}function abreBaraja(){for(var a='<ul class="baraja" id="naipes">',r=0;r<baraja.length;r++)a=a+'<li><a class="naipe" id="naipe'+r+'" onmousedown="javascript:cartaActual('+r+')"><div class="rotulo">'+(r+1)+"</div></a></li>";a+="</ul>",$("#tapete").html(a),a='<ul class="paqueteBaraja" id="paqueteNaipes">';for(var r=0;r<baraja.length;r++)naipeBorde=r%2==0?"borBlanco":"borGris",a=a+'<li id="naipe'+r+'"><a class="paqueteNaipe '+naipeBorde+'" onmousedown="javascript:mostrarCorte('+(baraja.length-r)+');"></a></li>';a+="</ul>",$("#moduloPaquetes").html(a),renderizar()}function sfFisherYates(){var a,r=baraja.slice(),o=baraja.length;for(baraja=[];o;)a=Math.floor(Math.random()*o--),baraja.push(r.splice(a,1)[0]);renderizar(),consola("fisherYates")}function sfDurstenfeld(){for(var a,r,o=baraja.length;o>0;)r=Math.floor(Math.random()*o),o--,a=baraja[o],baraja[o]=baraja[r],baraja[r]=a;renderizar(),consola("durstenfeld")}function sfSattolo(){for(var a=0;a<baraja.length-1;a++){var r=a+1+Math.floor(Math.random()*(baraja.length-a-1)),o=baraja[r];baraja[r]=baraja[a],baraja[a]=o}renderizar(),consola("sattolo")}function sfRandomOrg(){{var a=baraja.slice();JsonApi.apikey($("#customApiKeyRandom").val()).method("generateIntegers").params({n:baraja.length,min:0,max:baraja.length-1,replacement:!1}).post(function(r,o,e){for(var n=0;n<baraja.length;n++)baraja[n]=a[e.result.random.data[n]];comprobarApiRandom(e.result.requestsLeft,e.result.bitsLeft),renderizar(),consola("radomOrg")})}}function sfNumeroAleatorio(){var a=(baraja.slice(),"http://numero-aleatorio.com/generadores/servicio-json/?desde=0&hasta="+(baraja.length-1)+"&numero="+baraja.length+"&repeticion=0&json=0");$.getJSON(a,function(a){consola(a)})}function comprobarApiRandom(a,r){var o,e;if(void 0==a){JsonApi.apikey($("#customApiKeyRandom").val()).method("getUsage").params({apiKey:$("#customApiKeyRandom").val()}).post(function(a,r,n){e=n.result.requestsLeft,o=n.result.bitsLeft,$("#randomKeyApiRequestLeft").css("width",e/10+"%").attr("aria-valuenow",e),$("#randomKeyApiRequestLeft").html(e),$("#randomKeyApiBitsLeft").css("width",o/2500+"%").attr("aria-valuenow",o),$("#randomKeyApiBitsLeft").html(o)})}else $("#randomKeyApiRequestLeft").css("width",a/10+"%").attr("aria-valuenow",a),$("#randomKeyApiRequestLeft").html(a),$("#randomKeyApiBitsLeft").css("width",r/2500+"%").attr("aria-valuenow",r),$("#randomKeyApiBitsLeft").html(r)}function sfInvertir(){baraja.reverse(),consola("invertir"),renderizar()}function sfInvertirN(a){if(a>0){consola("invertir("+a+")");var r=baraja.slice(0,a),o=baraja.slice(a);r=r.reverse(),baraja=r.concat(o),renderizar()}else if(0>a){consola("invertir("+a+")"),a=baraja.length+parseInt(a);var r=baraja.slice(0,a),o=baraja.slice(a);o=o.reverse(),baraja=r.concat(o),renderizar()}else consola(a+" no es un argumento válido.")}function sfOverhand(){}function sfFaroExt(){for(var a=baraja.slice(),r=0;r<baraja.length;r++)baraja.length%2==0?r<baraja.length-1&&(baraja[2*r%(baraja.length-1)]=a[r]):baraja[2*r%baraja.length]=a[r];consola("faroExt"),renderizar()}function sfFaroInt(){for(var a=baraja.slice(),r=0;r<baraja.length;r++)baraja.length%2==0?baraja[(2*r+1)%(baraja.length+1)]=a[r]:baraja[(2*r+1)%baraja.length]=a[r];consola("faroInt"),renderizar()}function sfAntiFaroExt(){for(var a=baraja.slice(),r=0;r<baraja.length;r++)baraja.length%2==0?r<baraja.length-1&&(baraja[r]=a[2*r%(baraja.length-1)]):baraja[r]=a[2*r%baraja.length];consola("antiFaroExt"),renderizar()}function sfAntiFaroInt(){for(var a=baraja.slice(),r=0;r<baraja.length;r++)baraja[r]=baraja.length%2==0?a[(2*r+1)%(baraja.length+1)]:a[(2*r+1)%baraja.length];consola("antiFaroInt"),renderizar()}function renderizar(){var a;$("#matriz").attr("value",baraja),$("#ordenPersonal").val(baraja);for(var a=0;a<baraja.length;a++)$("#naipe"+a).css("backgroundImage","url(img/decks/"+imgDeck+"/"+baraja[a]+".png)");guardarSesion("baraja_autosave",baraja.toString())}function verModulos(a){mModulo="txtVer"+a.data.name,xModulo="#modulo"+a.data.name,document.getElementById(mModulo).className==vrChck0?(document.getElementById(mModulo).className=vrChck1,$(xModulo).css("display","block")):(document.getElementById(mModulo).className=vrChck0,$(xModulo).css("display","none"))}function inputConsola(){var a=$("#consolaInput").val();comandosHistorial.push(a),a=a.toLowerCase(),$("#consolaInput").val(""),a=a.split(";");for(var r=0;r<a.length;r++){var o=a[r].split("*");if(2==o.length)if(isNaN(parseInt(o[1])))consola("'"+o[1]+"' no es un multiplicador válido.");else{o[1]=parseInt(o[1]);for(var e=0;e<o[1];e++)ejecutarComando(o[0].trim())}else(o.length=1)&&ejecutarComando(o[0].trim())}}function ejecutarComando(a){var r=a.indexOf("("),o=a.indexOf(")"),e="";switch(-1!=r&&(0==r&&consola("Sintáxis no válida"),e=a.substring(r+1,o),a=a.substring(0,r)),a){case"help":case"ayuda":return void consola('Haga <a href="docs" target="_blank">click aquí</a> acceder a la ayuda.');case"version":return void consola("Barajador v0.1 (beta)");case"limpiar":case"clear":return void $("#consolaOutput").text("");case"recargar":case"refresh":return void refresh();case"historial":return void historial();case"cortar":return void sfCortar(e);case"invertir":return void(""==e?sfInvertir():sfInvertirN(e));case"eliminar":return void eliminarCartaX(e);case"fisheryates":return void sfFisherYates();case"durstenfeld":return void sfDurstenfeld();case"sattolo":return void sfSattolo();case"randomorg":return void sfRandomOrg();case"faroext":return void sfFaroExt();case"faroint":return void sfFaroInt();case"antifaroext":return void sfAntiFaroExt();case"antifaroint":return void sfAntiFaroInt();case"generarqr":return void generarQrConsola();case"screenshot":return;case"":return;default:return void consola(a+": No se encontró la orden")}}function consola(a){document.getElementById("consolaOutput").innerHTML=a+"\n"+document.getElementById("consolaOutput").innerHTML}function generarQr(){qrSize=250,urlApi="https://api.qrserver.com/v1/create-qr-code/?size="+qrSize+"x"+qrSize+"&data=";var a=baraja.toString();$("#imagenQr").attr("src",urlApi+a),$("#modalQr #descargar").attr("href",urlApi+a),$("#modalQr").modal()}function OpenInNewTab(a){var r=window.open(a,"_blank");r.focus()}function generarQrConsola(){qrSize=250,urlApi="https://api.qrserver.com/v1/create-qr-code/?size="+qrSize+"x"+qrSize+"&data=",consola("Código QR generado, descárguelo haciendo <a href='"+urlApi+baraja+"' download='barajaQr.png'>click aquí</a>.")}function screenshot(){html2canvas($("#moduloTapete"),{onrendered:function(a){var r=new Image;r=a.toDataURL("image/png"),r=r.replace("image/png","image/octet-stream"),$("#imagenScreen").attr("src",r),$("#modalScreen #descargar").attr("href",r),$("#modalScreen").modal()}})}function cambiarNombreArchivo(){$("#modalScreen #descargar").attr("download",$("#modalScreen input").val()+".png")}function screenshotConsola(){html2canvas($("#moduloTapete"),{onrendered:function(a){var r=new Image;r=a.toDataURL("image/png"),r=r.replace("image/png","image/octet-stream"),consola("Imagen generada. Haga <a href="+r+" download='"+$("#modalScreen input").val()+".png'>click aquí</a> para descargar")}})}function cambiarColorTapete(){$("#tapeteFondo").css("background-color",$("#colorTapete").val())}function cambiarTexturaTapete(){var a="url('img/table/"+$("#texturaTapete").val()+".png')";$("#tapeteFondo").css("background-image",a)}function cambiarColorConsola(){$("#consola").css("background",$("#colorConsola").val())}function cambiarColorConsolaTexto(){$("#consola").css("color",$("#colorConsolaTexto").val())}function cambiarFuenteConsola(){$("#consola").css("font-family",$("#fuenteConsola").val()),$("#consolaInput").css("font-family",$("#fuenteConsola").val()),$("#consolaOutput").css("font-family",$("#fuenteConsola").val())}function cartaActual(a){idCartaActual=a}function eliminarCarta(){baraja.splice(idCartaActual,1),abreBaraja(),consola("eliminar("+parseInt(idCartaActual+1)+")")}function eliminarCartaX(a){if(""==a)return void consola("Falta un argumento");if(a>0)consola("eliminar("+a+")"),a=parseInt(a)-1;else{if(!(0>a))return void consola(a+" no es un argumento válido.");consola("eliminar("+a+")"),a=baraja.length+parseInt(a)}baraja.splice(a,1),abreBaraja()}function editarCarta(){$("#modalEditarCarta input").val(baraja[idCartaActual]),$("#modalEditarCarta .naipe").css("backgroundImage","url(img/decks/"+imgDeck+"/"+baraja[idCartaActual]+".png)"),$("#modalEditarCarta").modal()}function editarCartaAplicar(){baraja[idCartaActual]=$("#modalEditarCarta input").val(),abreBaraja(),$("#modalEditarCarta").modal("hide")}function editarCodigoCarta(){$("#modalEditarCarta .naipe").css("backgroundImage","url(img/decks/"+imgDeck+"/"+$("#modalEditarCarta input").val()+".png)")}function sfModalCortar(){$("#alNumero").attr("min",-baraja.length+1),$("#alNumero").attr("max",baraja.length-1),$("#alNumero").val(0),$("#modalCortar").modal()}function actualizarCorte(){mostrarCorte($("#alNumero").val())}function mostrarCorte(a){$("#alNumero").val(a),a=baraja.length-a,a>baraja.length&&(a-=baraja.length),$("#moduloPaquetes #naipe"+a).css("margin-top","-205px"),"undefined"!=typeof lugarAnt&&lugarAnt!=a&&$("#moduloPaquetes #naipe"+lugarAnt).css("margin-top","-188px"),lugarAnt=a}function sfCortarMontar(){sfCortar(posicion=$("#alNumero").val())}function cortarPorAca(){sfCortar(idCartaActual)}function sfCortar(a){var r=baraja.slice(0,a),o=baraja.slice(a);baraja=o.concat(r),abreBaraja(),$("#modalCortar").modal("hide"),consola("cortar("+a+")")}function historial(){consola("historial");for(var a=0;a<comandosHistorial.length;a++){var r=a.toString();2==r.length&&(r=" "+r+" "),1==r.length&&(r="  "+r+" "),consola(r+comandosHistorial[a])}}function refresh(){location.reload()}function guardarSesion(a,r){var o=LZString.compressToUTF16(r);sessionStorage.setItem(a,o)}function abrirSesion(a){var r=sessionStorage.getItem(a);return r=LZString.decompressFromUTF16(r)}var imgDeck="wiki",imgBack="bicycle-red",vrChck0="glyphicon glyphicon-unchecked",vrChck1="glyphicon glyphicon-check",idCartaActual,lugarAnt,JsonApi=new RandomJs,comandosHistorial=[],comandoHistorialN=0;if($(".mnuGenerarQr").on("click",generarQr),$("#mnuGuardarImagen").on("click",screenshot),$("#ordenMnemonica").on("click",ordenarMnemonica),$("#ordenBicycle").on("click",ordenarBicycle),$("#orden4Kings").on("click",ordenar4Kings),$("#ordenRosarioEightKings").on("click",ordenarRosarioEightKings),$("#ordenRosarioDixRois").on("click",ordenarRosarioDixRois),$("#ordenRosarioUnusQuinque").on("click",ordenarRosarioUnusQuinque),$("#ordenRosario18Reyes").on("click",ordenarRosario18Reyes),$("#ordenSoloAces").on("click",ordenarSoloAces),$("#abrirOrdenPersonal").on("click",ordenarPersonal),$("#colorTapete").on("change",cambiarColorTapete),$("#texturaTapete").on("change",cambiarTexturaTapete),$("#colorConsola").on("change",cambiarColorConsola),$("#colorConsolaTexto").on("change",cambiarColorConsolaTexto),$("#fuenteConsola").on("change",cambiarFuenteConsola),$(".sfInvertir").on("click",sfInvertir),$("#openModalCortar").on("click",sfModalCortar),$(".btnMontar").on("click",sfCortarMontar),$("#alNumero").on("change",actualizarCorte),$(".sfFisherYates").on("click",sfFisherYates),$(".sfDurstenfeld").on("click",sfDurstenfeld),$(".sfSattolo").on("click",sfSattolo),$(".sfRandomOrg").on("click",sfRandomOrg),$(".sfNumeroAleatorio").on("click",sfNumeroAleatorio),$(".sfFaroExt").on("click",sfFaroExt),$(".sfFaroInt").on("click",sfFaroInt),$(".sfAntiFaroExt").on("click",sfAntiFaroExt),$(".sfAntiFaroIn").on("click",sfAntiFaroInt),$("#vrRefresh").on("click",refresh),$("#vrMatriz").on("click",{name:"Matriz"},verModulos),$("#vrTapete").on("click",{name:"Tapete"},verModulos),$("#vrBotonera").on("click",{name:"Botonera"},verModulos),$("#vrConsola").on("click",{name:"Consola"},verModulos),$("#modalEditarCarta input").on("keyup",editarCodigoCarta),$(".btnAplicar").on("click",editarCartaAplicar),$("#nombreImagenBaraja").on("change",cambiarNombreArchivo),$("#consolaInput").keydown(function(a){var r=a.keyCode?a.keyCode:a.which;if("13"==r)inputConsola(),comandoHistorialN=0;else if("38"==r){if(0!=comandosHistorial.length){var o=comandosHistorial.length-comandoHistorialN;return o>0&&($("#consolaInput").val(comandosHistorial[o-1]),comandoHistorialN++),!1}}else if((r="40")&&0!=comandosHistorial.length){var o=comandosHistorial.length-comandoHistorialN+2;o<comandosHistorial.length+1&&($("#consolaInput").val(comandosHistorial[o-1]),comandoHistorialN--)}}),document.oncontextmenu=function(){return!1},sessionStorage.getItem("baraja_autosave")){var baraja=abrirSesion("baraja_autosave");baraja=baraja.split(",")}else{var baraja="AT,2T,3T,4T,5T,6T,7T,8T,9T,10T,JT,QT,KT,AC,2C,3C,4C,5C,6C,7C,8C,9C,10C,JC,QC,KC,AP,2P,3P,4P,5P,6P,7P,8P,9P,10P,JP,QP,KP,AD,2D,3D,4D,5D,6D,7D,8D,9D,10D,JD,QD,KD";baraja=baraja.split(",")}abreBaraja(),$("#customApiKeyRandom").val("2dbcb5c9-d4f8-4d19-b1f1-cd5cf3980e97"),comprobarApiRandom(),$("#mostrarRotulos").on("switchChange.bootstrapSwitch",function(a,r){r?$(".rotulo").css("display","table-caption"):$(".rotulo").css("display","none")});