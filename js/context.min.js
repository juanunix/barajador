var context=context||function(){function e(e){i=$.extend({},i,e),$(document).on("click","html",function(){$(".dropdown-context").fadeOut(i.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),i.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(e){e.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var e=$(this).find(".dropdown-context-sub:first"),t=e.width(),n=e.offset().left,o=t+n>window.innerWidth;o&&e.addClass("drop-left")})}function t(e){i=$.extend({},i,e)}function n(e,t,o){var d=o?" dropdown-context-sub":"",a=i.compress?" compressed-context":"",r=$('<ul class="dropdown-menu dropdown-context'+d+a+'" id="dropdown-'+t+'"></ul>'),f=0,c="";for(f;f<e.length;f++){if("undefined"!=typeof e[f].divider)r.append('<li class="divider"></li>');else if("undefined"!=typeof e[f].header)r.append('<li class="nav-header">'+e[f].header+"</li>");else{if(linkId="undefined"!=typeof e[f].id?' id="'+e[f].id+'"':"",linkClass="undefined"!=typeof e[f]["class"]?' class="'+e[f]["class"]+'"':"",icono="undefined"!=typeof e[f].icon?'<span class="glyphicon glyphicon-'+e[f].icon+'" aria-hidden="true"></span> ':"","undefined"==typeof e[f].href&&(e[f].href="#"),"undefined"!=typeof e[f].target&&(c=' target="'+e[f].target+'"'),$sub="undefined"!=typeof e[f].subMenu?'<li class="dropdown-submenu"><a tabindex="-1" href="'+e[f].href+'">'+e[f].text+"</a></li>":$("<li><a"+linkId+linkClass+' tabindex="-1" href="'+e[f].href+'"'+c+">"+icono+e[f].text+"</a></li>"),"undefined"!=typeof e[f].action){var s=new Date,p="event-"+s.getTime()*Math.floor(1e5*Math.random()),u=e[f].action;$sub.find("a").attr("id",p),$("#"+p).addClass("context-event"),$(document).on("click","#"+p,u)}if(r.append($sub),"undefined"!=typeof e[f].subMenu){var l=n(e[f].subMenu,t,!0);r.find("li:last").append(l)}}"function"==typeof i.filter&&i.filter(r.find("li:last"))}return r}function o(e,t){var o=new Date,d=o.getTime(),a=n(t,d);$("body").append(a),$(document).on("contextmenu",e,function(e){if(e.preventDefault(),e.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+d),"boolean"==typeof i.above&&i.above)$dd.addClass("dropdown-context-up").css({top:e.pageY-20-$("#dropdown-"+d).height(),left:e.pageX-13}).fadeIn(i.fadeSpeed);else if("string"==typeof i.above&&"auto"==i.above){$dd.removeClass("dropdown-context-up");var t=$dd.height()+12;e.pageY+t>$("html").height()?$dd.addClass("dropdown-context-up").css({top:e.pageY-20-t,left:e.pageX-13}).fadeIn(i.fadeSpeed):$dd.css({top:e.pageY+10,left:e.pageX-13}).fadeIn(i.fadeSpeed)}})}function d(e){$(document).off("contextmenu",e).off("click",".context-event")}var i={fadeSpeed:100,filter:function(){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:e,settings:t,attach:o,destroy:d}}();$(document).ready(function(){context.init({preventDoubleContext:!1}),context.attach("#naipes li",[{header:"Opciones"},{text:"Cortar",href:"#",icon:"retweet",action:cortarPorAca},{divider:!0},{text:"Editar",href:"#",icon:"edit",action:editarCarta},{text:"Eliminar",href:"#",icon:"remove-circle",action:eliminarCarta}]),context.settings({compress:!0})});